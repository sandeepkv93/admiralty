# Admiralty

**Naval-Themed Task Planning for Multi-Agent Execution**

Admiralty is a Claude Code skill that transforms raw task descriptions into structured "sailing orders" for the [Nelson](https://github.com/harrymunro/nelson) multi-agent execution system. Using Royal Navy theming inspired by the Battle of Trafalgar, Admiralty provides a disciplined four-phase workflow to analyze tasks, assess risk, and produce actionable battle plans.

## Overview

Admiralty serves as the **planning layer** before execution. It takes a user's task description and produces:

1. **Sailing Orders**: Structured mission parameters including outcomes, constraints, scope boundaries, and success criteria
2. **Battle Plan**: Decomposed task list with ownership, dependencies, threat tiers, and validation requirements

These artifacts can be fed directly into `/nelson` for coordinated multi-agent execution, or used as planning documentation for any complex software engineering task.

## Key Features

- **Four-Phase Workflow**: Reconnoitre → Assess → Draft Orders → Signal
- **Threat Tier Classification**: Risk-based action stations (0-3) derived from task complexity and blast radius
- **Team Sizing**: Automatic captain allocation based on task complexity and execution mode
- **Smart Gap Handling**: Conservative defaults with targeted questions only for critical unknowns
- **Execution Mode Selection**: Chooses between single-session, subagents, or agent-team coordination
- **Copy-Paste Ready Output**: Generates complete sailing orders in a structured format ready for `/nelson`

## Relationship to Nelson

**Admiralty** and **Nelson** form a two-tier system for complex software engineering tasks:

- **Admiralty** (this project): The **doctrine and planning layer**. Analyzes tasks, assesses risk, and produces structured sailing orders and battle plans.
- **[Nelson](https://github.com/harrymunro/nelson)** (by [Harry Munro](https://github.com/harrymunro)): The **execution layer**. Commands a Royal Navy agent squadron through mission execution, coordination, quality gates, and stand-down.

Both skills use Royal Navy theming from the Trafalgar era, creating a cohesive metaphor for disciplined, coordinated task execution.

**Typical workflow**:
1. Run `/admiralty <task description>` to generate sailing orders
2. Copy the generated orders
3. Run `/nelson` and paste the sailing orders to begin execution
4. Nelson orchestrates captains, coordinates work, and produces a captain's log

## Installation

### Prerequisites

- [Claude Code](https://www.anthropic.com/claude/code) CLI installed
- Claude API access

### Setup

1. Clone this repository to your Claude Code skills directory:

```bash
git clone https://github.com/sandeepkv93/admiralty.git ~/.claude/skills/admiralty
```

2. Verify the skill is recognized:

```bash
claude --help
```

You should see `/admiralty` listed among available skills.

### Optional: Install Nelson

To execute the plans generated by Admiralty, install the Nelson skill:

```bash
git clone https://github.com/harrymunro/nelson.git ~/.claude/skills/nelson
```

## Usage

### Basic Workflow

```bash
# Generate sailing orders from a task description
/admiralty Refactor the authentication middleware to use JWT tokens instead of sessions
```

Admiralty will:
1. **Reconnoitre**: Extract task intent, entities, constraints, and identify gaps
2. **Assess**: Classify complexity (Small/Medium/Large), threat tier (Station 0-3), and execution mode
3. **Draft Orders**: Generate sailing orders and battle plan with task breakdown
4. **Signal**: Present complete, structured orders ready for `/nelson`

### Example Output

```text
===== ADMIRALTY SAILING ORDERS =====

Assessment:
- Complexity: Medium
- Threat Tier: Station 2
- Execution Mode: agent-team
- Team: 1 admiral + 4 captains + 1 red-cell navigator
- Assumptions: Token budget unlimited, deadline end of session

Sailing orders:
- Outcome: Replace session-based auth with JWT token authentication
- Success metric: All auth tests pass, existing endpoints work with new auth flow
- Deadline: End of current session

Constraints:
- Token/time budget: Flag if approaching 80% of session
- Reliability floor: All tests pass, no regressions
- Compliance/safety constraints: Preserve existing auth security properties
- Forbidden actions: No production deployment, no secret exposure

Scope:
- In scope: Middleware refactor, JWT generation/validation, test updates
- Out of scope: UI changes, migration scripts for existing sessions

Stop criteria:
- Stop when: Auth middleware uses JWT, all tests pass, rollback plan documented

Required handoff artifacts:
- Must produce: Refactored middleware code, updated tests, rollback documentation

Battle Plan:

Task ID: T-1
- Name: JWT library integration
- Owner: captain-1
- Deliverable: JWT generation and validation functions
- Dependencies: none
- Threat tier (0-3): 1
- File ownership (if code): auth/jwt.js
- Validation required: Unit tests for token generation/validation
- Rollback note required: no

Task ID: T-2
- Name: Middleware refactor
- Owner: captain-2
- Deliverable: Updated auth middleware using JWT
- Dependencies: T-1
- Threat tier (0-3): 2
- File ownership (if code): middleware/auth.js
- Validation required: Integration tests showing auth flow works
- Rollback note required: yes

[Additional tasks...]

===== END ORDERS =====
```

You can then copy these orders and run:

```bash
/nelson
# Paste the sailing orders when prompted
```

## Workflow Details

### Phase 1: Reconnoitre

Extracts intelligence from the task description:
- **Core intent**: One-sentence purpose
- **Key entities**: Systems, files, APIs involved
- **Stated/Implicit constraints**: Requirements and context
- **Gaps**: Missing critical information

**Gap handling**: Asks up to 3 targeted questions only if more than 2 critical gaps exist. Otherwise applies conservative defaults.

### Phase 2: Assess

Classifies the task along three dimensions:

**Complexity** (Small/Medium/Large):
- Small: Single concern, <3 files
- Medium: 2-4 concerns, 5-15 files
- Large: 5+ concerns, 15+ files, architectural impact

**Threat Tier** (Station 0-3):
- **Station 0 (Patrol)**: Low blast radius, easy rollback
- **Station 1 (Caution)**: User-visible changes, moderate impact
- **Station 2 (Action)**: Security/compliance/privacy implications, difficult rollback
- **Station 3 (Trafalgar)**: Irreversible actions, regulated effects, severe incident risk

**Execution Mode**:
- `single-session`: Sequential work, tightly coupled
- `subagents`: Parallel independent tasks
- `agent-team`: Parallel tasks with cross-coordination

### Phase 3: Draft Orders

Generates two artifacts:

1. **Sailing Orders**: Mission parameters (outcome, metrics, constraints, scope, stop criteria)
2. **Battle Plan**: Task breakdown with ownership, dependencies, threat tiers, validation requirements

### Phase 4: Signal

Presents complete orders in a standardized format ready for `/nelson` or human review.

## Action Stations (Threat Tiers)

Admiralty uses a four-tier threat classification system:

| Station | Name | Risk Profile | Examples |
|---------|------|--------------|----------|
| 0 | Patrol | Low blast radius, easy rollback | Docs, tests, linting, refactoring |
| 1 | Caution | User-visible changes, moderate impact | API changes, migrations, auth updates |
| 2 | Action | Security/compliance/privacy, difficult rollback | Production changes, PII handling, billing |
| 3 | Trafalgar | Irreversible, regulated, severe incident risk | Data deletion, production deploys without rollback |

**Doctrine**: Round threat tier UP when uncertain. Station 2+ automatically adds a red-cell navigator for adversarial review.

## File Structure

```
admiralty/
├── SKILL.md                           # Main skill prompt for Claude Code
├── agents/
│   └── openai.yaml                    # OpenAI model configuration
├── references/
│   ├── assessment-rubrics.md          # Classification criteria and defaults
│   └── admiralty-templates.md         # Template formats for orders and reports
└── README.md                          # This file
```

## Admiralty Doctrine

Core principles:
- **Round threat tier UP when uncertain** - Better to over-prepare than under-prepare
- **Prefer fewer tasks with clear ownership** over many granular tasks
- **Always state out-of-scope explicitly** to prevent scope creep
- **Conservative defaults over excessive questions** - Only ask when gaps are truly critical
- **If the task is simple enough to not need Nelson, say so** - Not every task needs multi-agent coordination

## Credits

**Author**: Sandeep Vishnu ([@sandeepkv93](https://github.com/sandeepkv93))

**Companion Project**: [Nelson](https://github.com/harrymunro/nelson) by [Harry Munro](https://github.com/harrymunro) - The multi-agent execution framework that Admiralty produces plans for.

**Inspiration**: The Royal Navy's Battle of Trafalgar (1805), where Vice-Admiral Lord Nelson's disciplined command structure and clear battle plans led to decisive victory.

## License

MIT License

Copyright (c) 2025 Sandeep Vishnu

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
